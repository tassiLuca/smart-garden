<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="757px" preserveAspectRatio="none" style="width:1007px;height:757px;background:#FFFFFF;" version="1.1" viewBox="0 0 1007 757" width="1007px" zoomAndPan="magnify"><defs/><g><!--MD5=[8523c9eb2e1b5151dfc9c2a797373c5f]
class Scheduler--><g id="elem_Scheduler"><rect codeLine="7" fill="#F1F1F1" height="80.9766" id="Scheduler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="556" y="395.5"/><ellipse cx="621.75" cy="411.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M618.1777,407.7651 L618.1777,405.6069 L625.5571,405.6069 L625.5571,407.7651 L623.0918,407.7651 L623.0918,415.8418 L625.5571,415.8418 L625.5571,418 L618.1777,418 L618.1777,415.8418 L620.6431,415.8418 L620.6431,407.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="68" x="642.25" y="416.791">Scheduler</text><line style="stroke:#181818;stroke-width:0.5;" x1="557" x2="763" y1="427.5" y2="427.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="557" x2="763" y1="435.5" y2="435.5"/><ellipse cx="567" cy="446.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="576" y="453.0352">addTask(task: Task*): bool</text><ellipse cx="567" cy="462.9883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="576" y="469.5234">schedule()</text></g><path d="M799.5,403 L799.5,426.9658 L647,464.2324 L799.5,434.9658 L799.5,458.9316 A0,0 0 0 0 799.5,458.9316 L1000.5,458.9316 A0,0 0 0 0 1000.5,458.9316 L1000.5,413 L990.5,403 L799.5,403 A0,0 0 0 0 799.5,403 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M990.5,403 L990.5,413 L1000.5,413 L990.5,403 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="805.5" y="420.5684">foreach task</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="821.5" y="435.8789">if (task must be executed)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="837.5" y="451.1895">task.execute()</text><!--MD5=[b34797a66dc35cbf1d65f7e3ca75530e]
class Task--><g id="elem_Task"><rect codeLine="12" fill="#F1F1F1" height="130.4414" id="Task" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="290" x="231" y="371"/><ellipse cx="355.75" cy="387" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M352.1777,383.2651 L352.1777,381.1069 L359.5571,381.1069 L359.5571,383.2651 L357.0918,383.2651 L357.0918,391.3418 L359.5571,391.3418 L359.5571,393.5 L352.1777,393.5 L352.1777,391.3418 L354.6431,391.3418 L354.6431,383.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="32" x="376.25" y="392.291">Task</text><line style="stroke:#181818;stroke-width:0.5;" x1="232" x2="520" y1="403" y2="403"/><line style="stroke:#181818;stroke-width:0.5;" x1="232" x2="520" y1="411" y2="411"/><ellipse cx="242" cy="422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="251" y="428.5352">init(initialState: State*)</text><ellipse cx="242" cy="438.4883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="251" y="445.0234">execute()</text><ellipse cx="242" cy="454.9766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="251" y="461.5117">stateTransition(nextState: State*)</text><ellipse cx="242" cy="471.4648" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="264" x="251" y="478">updateAndCheckTime(basePeriod: int)</text><ellipse cx="242" cy="487.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="251" y="494.4883">Garden(): SmartGarden*</text></g><!--MD5=[39bd0ac90f9970b9ca5c1ec8f6997e50]
class BaseTask--><g id="elem_BaseTask"><rect codeLine="25" fill="#F1F1F1" height="80.9766" id="BaseTask" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="159" x="296.5" y="561"/><ellipse cx="340.3" cy="577" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M340.1633,572.3481 L339.0095,577.4199 L341.3254,577.4199 Z M338.6691,570.1069 L341.6657,570.1069 L345.0109,582.5 L342.5622,582.5 L341.7985,579.437 L338.5197,579.437 L337.7727,582.5 L335.3239,582.5 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="63" x="360.7" y="582.291">BaseTask</text><line style="stroke:#181818;stroke-width:0.5;" x1="297.5" x2="454.5" y1="593" y2="593"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="304.5" y="601"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="316.5" y="610.5352">currentState: State*</text><line style="stroke:#181818;stroke-width:0.5;" x1="297.5" x2="454.5" y1="617.4883" y2="617.4883"/><polygon fill="#FFFF44" points="307.5,623.4883,311.5,627.4883,307.5,631.4883,303.5,627.4883" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="316.5" y="635.0234">execute()</text></g><path d="M490.5,584 L490.5,592.6553 L380.5,629.7324 L490.5,600.6553 L490.5,609.3105 A0,0 0 0 0 490.5,609.3105 L641.5,609.3105 A0,0 0 0 0 641.5,609.3105 L641.5,594 L631.5,584 L490.5,584 A0,0 0 0 0 490.5,584 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M631.5,584 L631.5,594 L641.5,594 L631.5,584 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="496.5" y="601.5684">currentState.handle()</text><!--MD5=[bd26e0f15110d33a434615c35349b6ef]
class MainTask--><g id="elem_MainTask"><rect codeLine="30" fill="#F1F1F1" height="48" id="MainTask" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="253.5" y="702"/><ellipse cx="268.5" cy="718" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M270.9731,724.1431 Q270.3921,724.4419 269.7529,724.5913 Q269.1138,724.7407 268.4082,724.7407 Q265.9014,724.7407 264.5815,723.0889 Q263.2617,721.437 263.2617,718.3159 Q263.2617,715.1865 264.5815,713.5347 Q265.9014,711.8828 268.4082,711.8828 Q269.1138,711.8828 269.7612,712.0322 Q270.4087,712.1816 270.9731,712.4805 L270.9731,715.2031 Q270.3423,714.6221 269.7488,714.3523 Q269.1553,714.0825 268.5244,714.0825 Q267.1797,714.0825 266.4949,715.1492 Q265.8101,716.2158 265.8101,718.3159 Q265.8101,720.4077 266.4949,721.4744 Q267.1797,722.541 268.5244,722.541 Q269.1553,722.541 269.7488,722.2712 Q270.3423,722.0015 270.9731,721.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="282.5" y="723.291">MainTask</text><line style="stroke:#181818;stroke-width:0.5;" x1="254.5" x2="349.5" y1="734" y2="734"/><line style="stroke:#181818;stroke-width:0.5;" x1="254.5" x2="349.5" y1="742" y2="742"/></g><!--MD5=[a34386485abd2836dba2c0f11787091d]
class IrrigationTask--><g id="elem_IrrigationTask"><rect codeLine="31" fill="#F1F1F1" height="48" id="IrrigationTask" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="386" y="702"/><ellipse cx="401" cy="718" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M403.4731,724.1431 Q402.8921,724.4419 402.2529,724.5913 Q401.6138,724.7407 400.9082,724.7407 Q398.4014,724.7407 397.0815,723.0889 Q395.7617,721.437 395.7617,718.3159 Q395.7617,715.1865 397.0815,713.5347 Q398.4014,711.8828 400.9082,711.8828 Q401.6138,711.8828 402.2612,712.0322 Q402.9087,712.1816 403.4731,712.4805 L403.4731,715.2031 Q402.8423,714.6221 402.2488,714.3523 Q401.6553,714.0825 401.0244,714.0825 Q399.6797,714.0825 398.9949,715.1492 Q398.3101,716.2158 398.3101,718.3159 Q398.3101,720.4077 398.9949,721.4744 Q399.6797,722.541 401.0244,722.541 Q401.6553,722.541 402.2488,722.2712 Q402.8423,722.0015 403.4731,721.4204 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="415" y="723.291">IrrigationTask</text><line style="stroke:#181818;stroke-width:0.5;" x1="387" x2="513" y1="734" y2="734"/><line style="stroke:#181818;stroke-width:0.5;" x1="387" x2="513" y1="742" y2="742"/></g><!--MD5=[60d6b92408f98aed8df94d5c6e04aa63]
class State--><g id="elem_State"><rect codeLine="38" fill="#F1F1F1" height="97.4648" id="State" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="163" x="32.5" y="387.5"/><ellipse cx="92.75" cy="403.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M89.1777,399.7651 L89.1777,397.6069 L96.5571,397.6069 L96.5571,399.7651 L94.0918,399.7651 L94.0918,407.8418 L96.5571,407.8418 L96.5571,410 L89.1777,410 L89.1777,407.8418 L91.6431,407.8418 L91.6431,399.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="34" x="113.25" y="408.791">State</text><line style="stroke:#181818;stroke-width:0.5;" x1="33.5" x2="194.5" y1="419.5" y2="419.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="33.5" x2="194.5" y1="427.5" y2="427.5"/><ellipse cx="43.5" cy="438.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="52.5" y="445.0352">handle()</text><ellipse cx="43.5" cy="454.9883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="52.5" y="461.5234">setTask(task: Task*)</text><ellipse cx="43.5" cy="471.4766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="52.5" y="478.0117">getTask(): Task*</text></g><g id="elem_GMN17"><path d="M6,573.5 L6,629.4316 A0,0 0 0 0 6,629.4316 L222,629.4316 A0,0 0 0 0 222,629.4316 L222,583.5 L212,573.5 L118,573.5 L114,484.73 L110,573.5 L6,573.5 A0,0 0 0 0 6,573.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M212,573.5 L212,583.5 L222,583.5 L212,573.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="12" y="591.0684">State Pattern [GoF]: all the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="12" y="606.3789">classes extends this class and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="12" y="621.6895">defines the handle function.</text></g><!--MD5=[ed46796df623a606c83309aea2845952]
class GardenState--><g id="elem_GardenState"><rect codeLine="47" fill="#F1F1F1" height="97.4648" id="GardenState" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="560" y="205.5"/><ellipse cx="575" cy="221.5" fill="#EB937F" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M578.6143,228 L570.8945,228 L570.8945,215.6069 L578.6143,215.6069 L578.6143,217.7651 L573.3433,217.7651 L573.3433,220.438 L578.1162,220.438 L578.1162,222.5962 L573.3433,222.5962 L573.3433,225.8418 L578.6143,225.8418 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="589" y="226.791">GardenState</text><line style="stroke:#181818;stroke-width:0.5;" x1="561" x2="675" y1="237.5" y2="237.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="566" y="255.0352">AUTO,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63" x="566" y="271.5234">MANUAL,</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="566" y="288.0117">ALARM</text><line style="stroke:#181818;stroke-width:0.5;" x1="561" x2="675" y1="294.9648" y2="294.9648"/></g><!--MD5=[b9a19996721f3e7e14a1b1a4bf744082]
class SmartGarden--><g id="elem_SmartGarden"><rect codeLine="53" fill="#F1F1F1" height="113.9531" id="SmartGarden" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="297" x="227.5" y="197"/><ellipse cx="326.75" cy="213" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M323.1777,209.2651 L323.1777,207.1069 L330.5571,207.1069 L330.5571,209.2651 L328.0918,209.2651 L328.0918,217.3418 L330.5571,217.3418 L330.5571,219.5 L323.1777,219.5 L323.1777,217.3418 L325.6431,217.3418 L325.6431,209.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="90" x="347.25" y="218.291">SmartGarden</text><line style="stroke:#181818;stroke-width:0.5;" x1="228.5" x2="523.5" y1="229" y2="229"/><line style="stroke:#181818;stroke-width:0.5;" x1="228.5" x2="523.5" y1="237" y2="237"/><ellipse cx="238.5" cy="248" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="247.5" y="254.5352">getState(): GardenState</text><ellipse cx="238.5" cy="264.4883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="218" x="247.5" y="271.0234">setState(newState: GardenState)</text><ellipse cx="238.5" cy="280.9766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255" x="247.5" y="287.5117">getLightingSystem(): LightingSystem*</text><ellipse cx="238.5" cy="297.4648" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="271" x="247.5" y="304">getIrrigationSystem(): IrrigationSystem*</text></g><!--MD5=[4b02f4963bcce63831ac97551f4a14b9]
class IrrigationSystem--><g id="elem_IrrigationSystem"><rect codeLine="63" fill="#F1F1F1" height="130.4414" id="IrrigationSystem" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="235" x="258.5" y="7"/><ellipse cx="315.75" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M312.1777,19.2651 L312.1777,17.1069 L319.5571,17.1069 L319.5571,19.2651 L317.0918,19.2651 L317.0918,27.3418 L319.5571,27.3418 L319.5571,29.5 L312.1777,29.5 L312.1777,27.3418 L314.6431,27.3418 L314.6431,19.2651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="112" x="336.25" y="28.291">IrrigationSystem</text><line style="stroke:#181818;stroke-width:0.5;" x1="259.5" x2="492.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="259.5" x2="492.5" y1="47" y2="47"/><ellipse cx="269.5" cy="58" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="278.5" y="64.5352">irrigate()</text><ellipse cx="269.5" cy="74.4883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="278.5" y="81.0234">stop()</text><ellipse cx="269.5" cy="90.9766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="278.5" y="97.5117">setIrrigationSpeed(speed: int)</text><ellipse cx="269.5" cy="107.4648" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="278.5" y="114">getState(): OnOffState</text><ellipse cx="269.5" cy="123.9531" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="209" x="278.5" y="130.4883">setState(newState: OnOffState)</text></g><!--MD5=[2bca399a08a294c4903ce6a898302d56]
class LightingSystem--><g id="elem_LightingSystem"><rect codeLine="71" fill="#F1F1F1" height="80.9766" id="LightingSystem" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="56" y="213.5"/><ellipse cx="71" cy="229.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M67.4277,225.7651 L67.4277,223.6069 L74.8071,223.6069 L74.8071,225.7651 L72.3418,225.7651 L72.3418,233.8418 L74.8071,233.8418 L74.8071,236 L67.4277,236 L67.4277,233.8418 L69.8931,233.8418 L69.8931,225.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="85" y="234.791">LightingSystem</text><line style="stroke:#181818;stroke-width:0.5;" x1="57" x2="191" y1="245.5" y2="245.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="57" x2="191" y1="253.5" y2="253.5"/><ellipse cx="67" cy="264.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="76" y="271.0352">activate()</text><ellipse cx="67" cy="280.9883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="76" y="287.5234">deactivate()</text></g><!--MD5=[7c1a0278dec21c72584b17e1785fd623]
class Light--><g id="elem_Light"><rect codeLine="79" fill="#F1F1F1" height="97.4648" id="Light" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="32.5" y="23.5"/><ellipse cx="102.75" cy="39.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M99.1777,35.7651 L99.1777,33.6069 L106.5571,33.6069 L106.5571,35.7651 L104.0918,35.7651 L104.0918,43.8418 L106.5571,43.8418 L106.5571,46 L99.1777,46 L99.1777,43.8418 L101.6431,43.8418 L101.6431,35.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="34" x="123.25" y="44.791">Light</text><line style="stroke:#181818;stroke-width:0.5;" x1="33.5" x2="214.5" y1="55.5" y2="55.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="33.5" x2="214.5" y1="63.5" y2="63.5"/><ellipse cx="43.5" cy="74.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="52.5" y="81.0352">switchOn()</text><ellipse cx="43.5" cy="90.9883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="52.5" y="97.5234">switchOn(intensity: int)</text><ellipse cx="43.5" cy="107.4766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="52.5" y="114.0117">switchOff()</text></g><!--MD5=[c7053b87ba68c345d9d28c2b67d411d4]
class ServoMotor--><g id="elem_ServoMotor"><rect codeLine="87" fill="#F1F1F1" height="97.4648" id="ServoMotor" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="175" x="528.5" y="23.5"/><ellipse cx="572.3" cy="39.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M568.7277,35.7651 L568.7277,33.6069 L576.1071,33.6069 L576.1071,35.7651 L573.6418,35.7651 L573.6418,43.8418 L576.1071,43.8418 L576.1071,46 L568.7277,46 L568.7277,43.8418 L571.1931,43.8418 L571.1931,35.7651 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="79" x="592.7" y="44.791">ServoMotor</text><line style="stroke:#181818;stroke-width:0.5;" x1="529.5" x2="702.5" y1="55.5" y2="55.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="529.5" x2="702.5" y1="63.5" y2="63.5"/><ellipse cx="539.5" cy="74.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="548.5" y="81.0352">on()</text><ellipse cx="539.5" cy="90.9883" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="149" x="548.5" y="97.5234">setPosition(angle: int)</text><ellipse cx="539.5" cy="107.4766" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="548.5" y="114.0117">off()</text></g><!--MD5=[af8ad43bb35fe322d1d3a6a8475568ec]
link Task to Scheduler--><g id="link_Task_Scheduler"><path codeLine="20" d="M521.05,436 C528.29,436 535.52,436 542.76,436 " fill="none" id="Task-to-Scheduler" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="555.79,436,549.79,432,543.79,436,549.79,440,555.79,436" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fe76cbf1f0be9115fed4cbc82a513d37]
reverse link Task to BaseTask--><g id="link_Task_BaseTask"><path d="M376,521.17 C376,534.92 376,548.58 376,560.58 " fill="none" id="Task-backto-BaseTask" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="369,521.15,376,501.15,383,521.15,369,521.15" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e6c9165f799c4e937781f4fe28a7d0d5]
reverse link BaseTask to MainTask--><g id="link_BaseTask_MainTask"><path d="M341.58,659.48 C332.53,674.46 323.27,689.79 315.99,701.84 " fill="none" id="BaseTask-backto-MainTask" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="335.64,655.77,351.97,642.27,347.62,663.01,335.64,655.77" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[9708c0188cc7c5068af9445d4b0b4380]
reverse link BaseTask to IrrigationTask--><g id="link_BaseTask_IrrigationTask"><path d="M410.42,659.48 C419.47,674.46 428.73,689.79 436.01,701.84 " fill="none" id="BaseTask-backto-IrrigationTask" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="404.38,663.01,400.03,642.27,416.36,655.77,404.38,663.01" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[3b31d3bc042314aa10587d353100f7d4]
link State to Task--><g id="link_State_Task"><path codeLine="44" d="M195.62,467.21 C202.96,468.74 210.3,469.94 217.64,470.79 " fill="none" id="State-to-Task" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="230.85,471.95,225.2251,467.4378,218.8965,470.8945,224.5214,475.4067,230.85,471.95" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[84699cfb13d865519a8a23a05488616b]
reverse link State to Task--><g id="link_State_Task"><path codeLine="45" d="M208.56,402.44 C215.99,401.29 223.42,400.5 230.85,400.05 " fill="none" id="State-backto-Task" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="195.62,404.79,202.2396,407.6502,207.4258,402.6399,200.8062,399.7797,195.62,404.79" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fbfe1efe4f403df65fe744fd2db8b61b]
reverse link SmartGarden to GardenState--><g id="link_SmartGarden_GardenState"><path codeLine="60" d="M537.98,254 C545.26,254 552.53,254 559.8,254 " fill="none" id="SmartGarden-backto-GardenState" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="524.89,254,530.89,258,536.89,254,530.89,250,524.89,254" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[efc4337ad742439c14ed0d5d8ba72a5c]
reverse link SmartGarden to Task--><g id="link_SmartGarden_Task"><path codeLine="61" d="M376,324.59 C376,339.83 376,355.89 376,370.9 " fill="none" id="SmartGarden-backto-Task" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="376,311.46,372,317.46,376,323.46,380,317.46,376,311.46" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[da343c28121c9f67e18b7eaa8e9ae07e]
link IrrigationSystem to SmartGarden--><g id="link_IrrigationSystem_SmartGarden"><path codeLine="76" d="M376,137.22 C376,152.29 376,168.42 376,183.7 " fill="none" id="IrrigationSystem-to-SmartGarden" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="376,196.87,380,190.87,376,184.87,372,190.87,376,196.87" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[54bcd35bea329e50998b8663ff0ee9a3]
link LightingSystem to SmartGarden--><g id="link_LightingSystem_SmartGarden"><path codeLine="77" d="M192.41,254 C199.66,254 206.91,254 214.15,254 " fill="none" id="LightingSystem-to-SmartGarden" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="227.19,254,221.1944,249.9934,215.19,253.9868,221.1856,257.9934,227.19,254" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[e7f9cad94a369d3abbef296e67de950f]
reverse link Light to LightingSystem--><g id="link_Light_LightingSystem"><path codeLine="85" d="M124,134.05 C124,160.2 124,190 124,213.23 " fill="none" id="Light-backto-LightingSystem" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="124,120.76,120,126.76,124,132.76,128,126.76,124,120.76" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[900f02b7ed4992ed48b47f6c4958b7d9]
reverse link IrrigationSystem to ServoMotor--><g id="link_IrrigationSystem_ServoMotor"><path codeLine="93" d="M506.83,72 C513.91,72 520.99,72 528.07,72 " fill="none" id="IrrigationSystem-backto-ServoMotor" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="493.66,72,499.66,76,505.66,72,499.66,68,493.66,72" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f1e5e2eb138fbf080c1772b46d8919a0]
@startuml controller-class-diagram

note right of Scheduler::schedule
    foreach task
        if (task must be executed)
            task.execute()
endnote
interface Scheduler {
    + addTask(task: Task*): bool
    + schedule()
}

interface Task {
    + init(initialState: State*)
    + execute()
    + stateTransition(nextState: State*)
    + updateAndCheckTime(basePeriod: int)
    + Garden(): SmartGarden*
}

Scheduler *-left- Task

note right of BaseTask::execute
    currentState.handle()
endnote
abstract class BaseTask implements Task {
    - currentState: State*
    # execute()
}

class MainTask extends BaseTask 
class IrrigationTask extends BaseTask

note bottom of State
State Pattern [GoF]: all the 
classes extends this class and 
defines the handle function.
endnote
interface State {
    + handle()
    + setTask(task: Task*)
    + getTask(): Task*
}

Task *-left- State
State *-right- Task

enum GardenState {
    AUTO,
    MANUAL,
    ALARM
}

interface SmartGarden {
    + getState(): GardenState
    + setState(newState: GardenState)
    + getLightingSystem(): LightingSystem*
    + getIrrigationSystem(): IrrigationSystem*
}

SmartGarden o-right- GardenState
SmartGarden *- - Task

interface IrrigationSystem {
    + irrigate()
    + stop()
    + setIrrigationSpeed(speed: int) 
    + getState(): OnOffState
    + setState(newState: OnOffState)
}

interface LightingSystem {
    + activate()
    + deactivate()
}

IrrigationSystem - -* SmartGarden
LightingSystem -right-* SmartGarden

interface Light {
    + switchOn()
    + switchOn(intensity: int)
    + switchOff()
}

Light *- - LightingSystem

interface ServoMotor {
    + on()
    + setPosition(angle: int)
    + off()
}

IrrigationSystem *-right- ServoMotor

@enduml

PlantUML version 1.2022.5(Sat Apr 30 12:55:52 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: IT
--></g></svg>